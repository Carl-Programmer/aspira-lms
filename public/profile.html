<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Profile</title><link rel='stylesheet' href='css/style.css'></head><body><div class='header'><div style='display:flex;align-items:center;gap:12px'><img src='assets/aspira-logo.png' class='logo-small'><div>ASPIRA</div></div><div><button id='logout' class='btn'>Logout</button></div></div><div class='container'><h1>Profile</h1><div class='card' style='max-width:600px'><form id='profileForm'><div style='display:flex;gap:12px;align-items:center'><img id='pp' src='' style='width:120px;height:120px;border-radius:999px;object-fit:cover'><div style='flex:1'><input id='firstname' class='input' placeholder='First name'><input id='lastname' class='input' placeholder='Last name'><input id='email' class='input' placeholder='Email' disabled></div></div><input type='file' id='pf' class='input'><button class='btn' style='margin-top:8px'>Save Changes</button></form></div></div><script>const API='/api'; const token=localStorage.getItem('aspira_token'); if(!token) location.href='login.html'; async function api(path,opt={}){opt.headers={...(opt.headers||{}),'Authorization':'Bearer '+token, ...(opt.headers||{})}; return fetch(API+path,opt);} document.getElementById('logout').addEventListener('click',()=>{localStorage.removeItem('aspira_token'); location.href='login.html'});
async function load(){ const me = await (await api('/users/me')).json(); document.getElementById('firstname').value = me.firstname; document.getElementById('lastname').value = me.lastname; document.getElementById('email').value = me.email; document.getElementById('pp').src = me.profilePicture || 'assets/aspira-logo.png'; }
load(); document.getElementById('profileForm').addEventListener('submit', async (e)=>{ e.preventDefault(); const form = new FormData(); form.append('firstname', document.getElementById('firstname').value); form.append('lastname', document.getElementById('lastname').value); if(document.getElementById('pf').files[0]) form.append('profilePicture', document.getElementById('pf').files[0]); const res = await fetch(API+'/users/me',{method:'PUT', headers:{'Authorization':'Bearer '+token}, body: form}); if(res.ok){ alert('Saved'); load(); } else alert('Failed'); });</script></body></html>