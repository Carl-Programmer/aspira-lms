<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Reset Password</title>
  </head>
  <body style="font-family:sans-serif; display:flex; flex-direction:column; align-items:center; margin-top:100px;">
    <h2>Reset Password</h2>
    <input id="password" type="password" placeholder="New Password" style="padding:8px; margin:6px 0;">
    <button id="resetBtn" style="padding:8px 14px;">Reset Password</button>

    <script>
      const API = "/api";
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get("token");

      document.getElementById("resetBtn").addEventListener("click", async () => {
        const password = document.getElementById("password").value;
        const res = await fetch(API + "/auth/reset-password", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ token, password }),
        });
        const data = await res.json();
        alert(data.msg);
        if (res.ok) window.location.href = "login.html";
      });
    </script>
  </body>
</html>
